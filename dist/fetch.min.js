!function(){"use strict";function t(t){return p.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function e(t){var e={};["load","error","timeout"].forEach(function(r){t["on"+r]=function(){e[r]&&e[r](t)}}),t.on=function(t,r){e[t]=r},t.onabort=function(){e={}}}function r(){}function n(t,e){var n=t.prototype;d?d(e.prototype,n):f?e.prototype=f(n):(r.prototype=n,e.prototype=new r),e.prototype.constructor=e}function o(e){return"function"===t(e)&&w.test(l.call(e))}function s(){this.bodyUsed=!1}function i(e){var r=t(e);return"string"===r?"text":E&&e instanceof Blob?"blob":R&&e instanceof FormData?"formData":x&&e instanceof URLSearchParams?"searchParams":e&&"object"===r?"json":null}function a(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader;return e.readAsText(t),a(e)}function c(t){return JSON.parse(t)}function h(r){this.xhr=g?new function(r){var n=new XDomainRequest;return e(n),"number"===t(r.timeout)&&(n.timeout=r.timeout),n}(r):new function(t){var r=new XMLHttpRequest;return e(r),"include"===t.credentials&&(r.withCredentials=!0),"responseType"in r&&E&&(r.responseType="blob"),r}(r)}var p=Object.prototype.toString,f=Object.create,d=Object.setPrototypeOf,l=Function.prototype.toString,w="";w="^"+(w=(w=(w+=l.call(Function)).replace(/([.*+?^=!:$(){}|[\]\/\\])/g,"\\$1")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"))+"$",w=new RegExp(w);var y=o(window.fetch),m=o(window.Headers),v=o(window.Request),b=o(window.Response),R=o(window.FormData),x=o(window.URLSearchParams),g=o(window.XDomainRequest),E=o(window.FileReader)&&o(window.Blob),T=o(window.Symbol)&&"iterator"in window.Symbol;if(!m){function P(t){if(this.map={},t instanceof P)t.forEach(function(t,e){this.append(e,t)},this);else if(t)for(var e in t)t.hasOwnProperty(e)&&this.append(e,t[e])}P.prototype.append=function(t,e){t=q(t),e=H(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},P.prototype["delete"]=function(t){delete this.map[q(t)]},P.prototype.get=function(t){var e=this.map[q(t)];return e?e[0]:null},P.prototype.getAll=function(t){return this.map[q(t)]||[]},P.prototype.has=function(t){return this.map.hasOwnProperty(q(t))},P.prototype.set=function(t,e){this.map[q(t)]=[H(e)]},P.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},P.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),U(t)},P.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),U(t)},P.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),U(t)},T&&(P.prototype[Symbol.iterator]=P.prototype.entries);function q(e){if("string"!==t(e)&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function H(e){return"string"!==t(e)&&(e=String(e)),e}function U(t){var e=0,r=t.length,n={next:function(){var n=t[e++];return{done:e>=r,value:n}}};return T&&(n[Symbol.iterator]=function(){return n}),n}window.Headers=P}var S=window.Headers;["text","blob","formData","json","arrayBuffer"].forEach(function(t){s.prototype[t]=function(){return function(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):(t.bodyUsed=!0,Promise.resolve(t._body))}(this).then(function(e){return function(t,e){var r=i(t);return null!==t&&void 0!==t&&r&&r!==e?j[e]&&j[e][r]?j[e][r](t):Promise.reject(new Error("Convertion from "+r+" to "+e+" not supported")):Promise.resolve(t)}(e,t)})}}),s.prototype._initBody=function(t){if(this._body=t,!this.headers.get("content-type")){switch(i(t)){case"text":this.headers.set("content-type","text/plain;charset=UTF-8");break;case"blob":t&&t.type&&this.headers.set("content-type",t.type);break;case"searchParams":this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};var j={text:{json:function(t){return Promise.resolve(JSON.stringify(t))},blob:function(t){return u(t)},searchParams:function(t){return Promise.resolve(t.toString())}},json:{text:function(t){return Promise.resolve(c(t))},blob:function(t){return u(t).then(c)}},formData:{text:function(t){return function(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),Promise.resolve(e)}(t)}},blob:{text:function(t){return Promise.resolve(new Blob([t]))},json:function(t){return Promise.resolve(new Blob([JSON.stringify(t)]))}},arrayBuffer:{blob:function(t){return function(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}(t)}}};if(!v){function O(t,e){var r=(e=e||{}).body;if(t instanceof O){if(t.bodyUsed)throw new TypeError("Already read");if(this.url=t.url,this.credentials=t.credentials,!e.headers){var n=this.headers=new S(t.headers);n.map["x-requested-with"]||n.set("X-Requested-With","XMLHttpRequest")}this.method=t.method,this.mode=t.mode,r||(r=t._body,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new S(e.headers)),this.method=(e.method||this.method||"GET").toUpperCase(),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}n(s,O),O.prototype.clone=function(){return new O(this)},window.Request=O}var A=window.Request;if(!b){function B(t,e){e||(e={}),this.type="default",this.status=e.status,1223===this.status&&(this.status=204),this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof S?e.headers:new S(e.headers),this.url=e.url||"",this._initBody(t)}n(s,B),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},B.error=function(){var t=new B(null,{status:0,statusText:""});return t.type="error",t};var F=[301,302,303,307,308];B.redirect=function(t,e){if(-1===F.indexOf(e))throw new RangeError("Invalid status code");return new B(null,{status:e,headers:{location:t}})},window.Response=B}var D=window.Response;if(h.prototype.on=function(t,e){this.xhr.on(t,e)},h.prototype.setRequestHeader=function(t,e){this.xhr.setRequestHeader&&this.xhr.setRequestHeader(t,e)},h.prototype.open=function(t,e,r,n,o){this.xhr.open&&this.xhr.open(t,e,r,n,o)},h.prototype.send=function(t){this.xhr.send&&this.xhr.send(t)},h.prototype.abort=function(){this.xhr.abort&&this.xhr.abort()},!y){function L(t,e){return new Promise(function(r,n){var o,s=new h(o=!e&&e instanceof A?t:new A(t,e));s.on("load",function(t){var e={status:t.status,statusText:t.statusText,headers:function(t){var e=new S;if(t.getAllResponseHeaders){var r=t.getAllResponseHeaders()||"";if(/\S/.test(r))for(var n=r.split("\r\n"),o=0;o<n.length;o++){var s=n[o],i=s.indexOf(": ");if(i>0){var a=s.substring(0,i).trim(),u=s.substring(i+2).trim();e.append(a,u)}}}return e}(t),url:"responseURL"in s?s.responseURL:s.getResponseHeader&&/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in t?t.response:t.responseText;r(new D(n,e))}),s.on("error",function(){n(new TypeError("Network request failed"))}),s.on("timeout",function(){n(new TypeError("Network request timeout"))}),s.open(o.method,o.url,!0),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof o._body?null:o._body)})}L.polyfill=!0,window.fetch=L}}();
//# sourceMappingURL=fetch.js.map